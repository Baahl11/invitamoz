"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([["44540"],{578382:function(e,t,r){r.d(t,{hw:function(){return s},r9:function(){return o},sh:function(){return a}});var n=r(447511),i=r(236269),o=function(e,t){return t?"100%":e?n.Qi:n.$A},a=function(e){return e?"100%":"95%"},s=function(e){return{message:(0,i.Z)(e,"message"),api_error_code:(0,i.Z)(e,"api_error_code"),error_code:(0,i.Z)(e,"error_code"),code:(0,i.Z)(e,"code"),httpStatus:(0,i.Z)(e,"httpStatus")}}},447511:function(e,t,r){r.d(t,{$A:function(){return a},J7:function(){return n},MB:function(){return u},NJ:function(){return f},PF:function(){return v},Qi:function(){return s},_f:function(){return o},a2:function(){return m},aN:function(){return i},aS:function(){return b},br:function(){return P},f$:function(){return A},jI:function(){return c},n7:function(){return l},qm:function(){return p},rd:function(){return h},ts:function(){return _},vB:function(){return g},vF:function(){return w},x1:function(){return d},yg:function(){return y}});var n="#f0f0eb",i="#c957bd",o="100",a="469px",s="900px",l=600,c={__style:{backgroundColor:"#E9E4FF"}},u="520px",_="180px",d=2,p="@",f=2,b=function(e){return{"Thinking about the question":e._('Thinking about the question', 'concierge.components.chat.thinking.steps.text', 'thinking steps text'),Finish:e._('Finish', 'concierge.components.chat.finish.steps.text', 'finish steps text'),"Generating the response":e._('Generating the response', 'concierge.components.chat.generating.steps.text', 'generating steps text'),"Classifying the question":e._('Classifying the question', 'concierge.components.chat.classifying.steps.text', 'classifying steps text'),"Fetching the data tables":e._('Fetching the data tables', 'concierge.components.chat.fetching.steps.text', 'fetching steps text'),"Generating the query":e._('Generating the query', 'concierge.components.chat.query.steps.text', 'query steps text'),"Picking up the best query":e._('Picking up the best query', 'concierge.components.chat.best.query.steps.text', 'best query steps text'),"Validating the query":e._('Validating the query', 'concierge.components.chat.validating.steps.text', 'validating steps text'),"Correcting the query":e._('Correcting the query', 'concierge.components.chat.correcting.steps.text', 'correcting steps text'),"Using SQL":e._('Using SQL', 'concierge.components.chat.sql.steps.text', 'sql steps text'),"Executing the query":e._('Executing the query', 'concierge.components.chat.executing.steps.text', 'executing steps text'),"The query execution is finished":e._('The query execution is finished', 'concierge.components.chat.query.finished.steps.text', 'query finished steps text'),Error:e._('Error', 'concierge.components.chat.error.steps.text', 'error steps text')}},h=["helix-users","helix-dev"],m="#pinnacle-feedback",v="https://pinterest.enterprise.slack.com/archives/C08K7TVLWJC",g="https://i.pinimg.com/originals/32/78/fb/3278fb42c068009b300151775abf22cd.png",y="https://i.pinimg.com/originals/0e/73/84/0e738478d913ac3c7d699e74918e3d9a.png",P="https://i.pinimg.com/originals/56/36/d3/5636d36bfe20b378b6a946ffc2b8dcee.png",A="https://i.pinimg.com/originals/7a/c0/dd/7ac0ddee9dcf249927b5e6a9d9363418.png",w={CUSTOMIZED_COMPONENT_BASE64_IMAGE:"customized_component_base64_image"}},663952:function(e,t,r){r.d(t,{D:function(){return u},q:function(){return _}});var n=r(387784),i=r(653551),o=r(575820),a=r(680811);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var l=(0,n.createContext)(!1),c=function(){var e,t,r=(0,i.TH)();return(null==(e=r.state)?void 0:e.isAppFactoryOAuth)||(null!=(t=(0,o.mB)(r.search).next)?t:"").startsWith("/app-factory-oauth/")};function u(e){var t,r=e.children,i=c(),o=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(i))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],l=!0,c=!1;try{for(o=(r=r.call(e)).next;!(l=(n=o.call(r)).done)&&(s.push(n.value),2!==s.length);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,2):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=o[0],_=o[1];return(0,n.useEffect)(function(){i&&_(!0)},[i]),(0,a.jsx)(l,{value:u,children:r})}function _(){return(0,n.use)(l)}},368550:function(e,t,r){r.d(t,{Z:function(){return eN}});var n=r(387784),i=r(581722),o=r(230201),a=r(27399),s=r(249459),l=r(465739),c=r(209750),u=r(71133),_=r(609252),d=r(936367),p=r(209045),f=r(767415);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t,r){return(t=g(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var y=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}},P=null,A=function(){var e;function t(e){var r=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");v(this,"_logTimeoutLong",void 0),v(this,"_logTimeoutShort",void 0),v(this,"_clickthroughStartEvent",null),v(this,"_utcDate",new Date),v(this,"_collectionClickthroughEndEvent",null),this._webFastFlushEventsEnabled=e.webFastFlushEventsEnabled,this._contextLogger=(0,c.ZP)(e.webFastFlushEventsEnabled,e.webAuxDataErrorClassEnabled);var n=function(){var e=document.activeElement;if(e&&e.id===s.Z.VIDEO_IFRAME_ID&&e)return void setTimeout(function(){return e.blur()},0);_.Z.pause(d.LU),r.flushEvents()},i=y(function(){return n()}),o=function(){_.Z.resume(d.LU)};this._contextLogger&&this._contextLogger.initiateIndexDBCache&&this._contextLogger.initiateIndexDBCache(),window.addEventListener("beforeunload",i),window.addEventListener("pagehide",i),window.addEventListener("focus",o),window.addEventListener("blur",function(){return n()});var a=(0,u.sR)(),l=a.hidden,p=a.visibilityChange;p&&window.addEventListener(p,function(){document[l]?n():(r.flushEvents(),o())},!1)}return e=[{key:"setTimeoutToFlushEvents",value:function(e){!this._logTimeoutShort&&(!this._webFastFlushEventsEnabled&&e.view_type&&l.I3.includes(e.view_type)&&13===e.event_type||this._webFastFlushEventsEnabled&&(0,u.Q9)(e))?this._logTimeoutShort=setTimeout(this.flushEvents.bind(this,!1,!0),l.aD):this._logTimeoutLong||(this._logTimeoutLong=setTimeout(this.flushEvents.bind(this),l.YX))}},{key:"addEvent",value:function(e,t){var r,n,i=e.event_type;if(null!=i&&(0,c.cA)(e)){this.setTimeoutToFlushEvents(e);var o=(0,c.li)(e,t);o.appState=document&&document.hasFocus()?0:void 0;var a=c.Ch[i];if(a&&1){if(a.startsWith("storyImpression")){null!=(r=o.event_data)&&r.storyImpressions&&(o.event_data.storyImpression=o.event_data.storyImpressions,delete o.event_data.storyImpressions),this._contextLogger.logImpression((0,c.a)(o,"storyImpression"));return}(0,c.nc)(o,a).forEach(this._contextLogger.logImpression);return}if((0,f.nP)("webapp.contextLogger.impressionType",{sampleRate:.01,tags:{event_type:i}}),this._contextLogger.logContextEvent(o),12===i&&(this._contextLogger.logContextEvent(m(m({},o),{},{event_type:7946})),this._clickthroughStartEvent=m(m({},o),{},{time:1e6*Date.now()}),null==(n=P)||n.storeClickthroughProperties({view_type:o.view_type,view_parameter:o.view_parameter,component:o.component,element:o.element,object_id_str:o.object_id_str,view_data:o.view_data,aux_data:o.aux_data,clientTrackingParams:o.clientTrackingParams})),(7761===i||7762===i)&&(this._collectionClickthroughEndEvent=m(m({},o),{},{event_type:7761===i?7777:7843})),4100===i&&this._collectionClickthroughEndEvent){var s=this._collectionClickthroughEndEvent;this._collectionClickthroughEndEvent=null;var l=m(m({},s),{},{object_id_str:o.object_id_str,duration_ns:o.duration_ns});this._contextLogger.logContextEvent(l)}}}},{key:"flushEvents",value:function(){var e,t,r=null==(e=(t=this._contextLogger).getContextEvents)?void 0:e.call(t);r&&r.length&&this._contextLogger.flushContextEvents(),this._reset()}},{key:"_reset",value:function(){this._resetShortTimerEvents(),this._resetLongTimerEvents()}},{key:"_resetShortTimerEvents",value:function(){var e,t;null==(e=(t=this._contextLogger).resetEventsBuffer)||e.call(t),clearTimeout(this._logTimeoutShort),this._logTimeoutShort=void 0}},{key:"_resetLongTimerEvents",value:function(){var e,t;null==(e=(t=this._contextLogger).resetEventsBuffer)||e.call(t),clearTimeout(this._logTimeoutLong),this._logTimeoutLong=void 0}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(),w=r(753806),x=r(581909),E=r(935059),k=r(653551),S=r(433069),T=r(651263),z=r(680811);function L(e){var t=e.children,r=(0,k.TH)(),i=(0,S.b)(),o=(0,n.useMemo)(function(){if(i){var e=new URLSearchParams(r.search);if(!e.get("url")){var t=e.get("tracking_id")||e.get("e_t"),n=e.get("utm_campaign"),o=e.get("utm_source");if(t&&n&&o)return JSON.stringify({message_type:n,tracking_id:t,utm_source:o})}}},[i,r.search]),a=(0,n.useMemo)(function(){return{landingContext:o}},[o]);return(0,z.jsx)(T.T,{value:a,children:t})}var I=r(501010),C=r(774838),D=r(647908),O=r(660322),j=r(761051),R=r(487038),B=r(49932),N=r(893957);function Z(e){var t=e.children,r=(0,o.u)(),n=(0,p.w)({contextLogger:r});return(0,N.Z)(function(){document.hasFocus()&&n.registerApp(),n.addEventListeners()}),(0,z.jsx)(B.$,{value:n,children:t})}var F=r(801983),M=r(680405),U=r(746868),H=r(825541),V=r(740097),G=r(351736),q=r(739405),W=function(e){var t;return null!=(t=({"ar-SA":"tall","bn-IN":"tall","hi-IN":"tall","te-IN":"tall","ko-KR":"ck","zh-CN":"ck","zh-TW":"ck",ja:"ja","th-TH":"th","vi-VN":"vi"})[e])?t:"default"};function J(e){var t=e.children,r=(0,G.vs)(),n=(0,q.HG)(),i=W((0,C.B)().locale);return(0,z.jsx)(V.Ag,{colorScheme:r&&!n?"dark":"light",children:(0,z.jsx)(V.Ho,{languageMode:i,children:t})})}function Y(e){var t=e.children,r=(0,q.ml)();return(0,z.jsx)(V.Q_,{deviceType:r?"mobile":"desktop",children:t})}function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach(function(t){X(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function X(e,t,r){var n;return(n=function(e,t){if("object"!=Q(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Q(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==Q(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ee=[];function et(e){var t=e.children,r=(0,C.B)();(0,n.useMemo)(function(){return{web_gestalt_calico:{anyEnabled:!0,group:"enabled"}}},[]);var i=ee.reduce(function(e,t){return K(K({},e),{},X({},t,r.experimentsClient.checkExperiment(t)))},{});return(0,z.jsx)(V.II,{value:i,children:t})}var er=r(680391),en=r(74972);function ei(e){var t,r,i,o,a=e.children,s=(t=(0,en.G)().setAppFocusState,r=(0,n.useCallback)(function(){_.Z.pause(),t(!1)},[t]),i=(0,n.useCallback)(function(){_.Z.resume(),t(!0)},[t]),o=(0,n.useMemo)(function(){return{onOpen:r,onClose:i}},[r,i]),{linkHandlers:(0,n.useMemo)(function(){return{onNavigation:function(e){var t=e.href,r=e.target;return(0,er.Z)({href:t,target:r})}}},[]),sheetMobileHandlers:o}),l=s.sheetMobileHandlers,c=s.linkHandlers;return(0,z.jsx)(V.uu,{linkHandlers:c,sheetMobileHandlers:l,children:a})}var eo=r(400962),ea=r(94082),es=r(663952),el=r(173202),ec=r(705460),eu=r(953833),e_=r(169166),ed=r(506807),ep=r(381571),ef=r(648447),eb=r(591048),eh=r(520803),em=function(){var e;return null!=(e=window.performance)&&e.now?window.performance.now():null},ev=function(e){return["/advertiser/"].reduce(function(t,r){return e.includes(r)||t},!1)};function eg(e){var t,r=e.children,i=e.immutableLocation,o=e.routerHistoryAction,a=e.staticContext,s=(0,n.useRef)(null),l=(0,n.useRef)(null),c=(0,n.useRef)(i),u=(0,n.useRef)(!0),_=(0,eh.Z)(),d=_.path,p=_.params,f=(0,n.useRef)(d),b=(0,n.useRef)(p),h=(0,eu.Z)(a.deviceType);if(u.current&&(0,ep.ZP)(!0,null==(t=a.serverData)?void 0:t.trace_id),(0,n.useEffect)(function(){f.current=d},[d]),(0,n.useEffect)(function(){b.current=p},[p]),(0,n.useEffect)(function(){(0,ef.UQ)(),u.current=!1},[]),ev(i.pathname)?c.current.pathname!==i.pathname:c.current!==i){c.current=i,l.current=em();var m=l.current;if(!u.current){var v=!s.current;(0,ec.A9)("routeStart",{tags:{action:o}}),(0,eb.Eg)(v),(0,ef.Ux)(v),(0,ef.on)(),(0,ep._T)(),(0,ep.ZP)(!1);var g=(0,eb.LH)().defaultBufferSize;m&&((0,ec.A9)("routeStart.defaultBufferSize",{count:g}),s.current={time:m,action:o})}}return(0,z.jsx)(ed.Z,{value:h?a:null,children:(0,z.jsx)(e_.Z,{value:s.current,children:r})})}var ey=r(437993),eP=r(712655),eA=r(417394),ew=r(23641);function ex(e){var t=e.children,r=e.immutableLocation,i=e.routerHistoryAction,o=(0,n.useRef)(!0),a=(0,n.useRef)(!1),s=(0,n.useRef)(!1),l=(0,n.useRef)(r),c=performance.now(),u=(0,I.Z)().checkExperiment("web_pwt_validate_suspense").group;return u&&(0,f.nP)("pwt_logger_v4_render",{sampleRate:1,tags:{experimentGroup:u}}),a.current=a.current||ev(r.pathname)?l.current.pathname!==r.pathname:l.current!==r,a.current&&!s.current&&((0,eA.yh)("routeChange"),s.current=!0,(0,ey.N0)(),u&&(0,f.nP)("pwt_logger_v4_route_change_reset",{sampleRate:1,tags:{experimentGroup:u}})),(0,n.useLayoutEffect)(function(){if((ev(r.pathname)?l.current.pathname!==r.pathname:l.current!==r)||o.current){l.current=r;var e=o.current?0:c;(0,eA.ep)(i,e,o.current),(0,ew.Nx)("NavigationCompletev4"),o.current=!1,a.current=!1,s.current=!1,u&&(0,f.nP)("pwt_logger_v4_navigation_complete",{sampleRate:1,tags:{experimentGroup:u}})}},[o,i,r,c,a]),t}function eE(e){var t=e.children,r=e.immutableLocation,n=e.routerHistoryAction;return(0,eP.Z)()?(0,z.jsx)(ey.mW,{children:(0,z.jsx)(ex,{immutableLocation:r,routerHistoryAction:n,children:t})}):t}var ek=r(57887);function eS(e){var t=e.children,r=e.traceLoggerData,n=(0,C.B)(),i=(0,k.ur)(),o=(0,k.TH)(),a=(0,I.Z)().checkExperiment("web_pwt_validate_suspense").group,s=(0,el.Z)({requestContext:n,traceLoggerData:r});return(0,ec.iF)(i),"enabled_switch_v4_v3"===a?(0,z.jsx)(eE,{immutableLocation:o,routerHistoryAction:i,children:(0,z.jsx)(eg,{immutableLocation:o,routerHistoryAction:i,staticContext:s,children:t})}):(0,z.jsx)(eg,{immutableLocation:o,routerHistoryAction:i,staticContext:s,children:(0,z.jsx)(eE,{immutableLocation:o,routerHistoryAction:i,children:t})})}function eT(e){var t=e.children,r=e.context,n=e.otaData,i=e.inContextTranslation,o=e.requestContext,a=e.resourceCreator,s=e.traceLoggerData,l=(0,I.Z)().checkExperiment("web_pwt_validate_suspense").anyEnabled,c=(0,z.jsx)(Y,{children:(0,z.jsx)(et,{children:(0,z.jsx)(J,{children:(0,z.jsx)(H.Z,{children:(0,z.jsx)(eo.nK,{children:(0,z.jsx)(en.g,{children:(0,z.jsx)(ei,{children:(0,z.jsx)(U.Ih,{children:(0,z.jsx)(es.D,{children:(0,z.jsx)(ek.UZ,{resourceCreator:a,children:t})})})})})})})})})});return(0,z.jsx)(M.E,{value:r,children:l?(0,z.jsx)(eS,{traceLoggerData:s,children:(0,z.jsx)(ea.Z,{enableInContextTranslation:i,locale:o.locale,otaData:n,children:c})}):(0,z.jsx)(ea.Z,{enableInContextTranslation:i,locale:o.locale,otaData:n,children:(0,z.jsx)(eS,{traceLoggerData:s,children:c})})})}var ez=r(914253),eL=r(228612),eI=r(157498);function eC(e){return(eC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eD=["children","reduxStore","serverState"];function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ej(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(t){var n,i;n=t,i=r[t],(n=function(e){var t=function(e,t){if("object"!=eC(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=eC(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eC(t)?t:t+""}(n))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eR(e){var t=e.children,r=(0,eI.dM)(),i=Object.keys(r).find(function(e){return void 0!==r[e].login_state}),o=i?r[i]:void 0,a=(0,n.useMemo)(function(){return(0,F.Z)(o)},[o]),s=(0,C.gf)(),l=a.isAuth,c=(0,C.B)().isAuthenticated;return(0,n.useEffect)(function(){c!==l&&s({isAuthenticated:l})},[c,l]),(0,z.jsx)(E.$,{value:a,children:t})}function eB(e){var t=e.children,r=(0,I.Z)(),i=(0,eL.JC)(),s=(0,n.useRef)(function(e){return i[e]});(0,n.useEffect)(function(){s.current=function(e){return i[e]}},[i]);var l=(0,n.useMemo)(function(){var e,t,n,i,o,l,c,_,d,f,b;return l=(e={getReduxPin:function(e){return s.current(e)},webFastFlushEventsEnabled:r.checkExperiment("cli_fast_flush_events").anyEnabled,webAuxDataErrorClassEnabled:r.checkExperiment("web_aux_data_error_class").anyEnabled}).getReduxPin,d=new A({webFastFlushEventsEnabled:void 0!==(c=e.webFastFlushEventsEnabled)&&c,webAuxDataErrorClassEnabled:void 0!==(_=e.webAuxDataErrorClassEnabled)&&_}),window.addEventListener&&window.addEventListener("focus",function(){if(d._clickthroughStartEvent){var e=d._clickthroughStartEvent;d._clickthroughStartEvent=null;var t=m(m({},e),{},{event_type:4100,duration_ns:(0,u.ZP)()-e.time});d.addEvent(t)}}),null!=(t=(n=d._contextLogger)._getIndexDBInstance)&&t.call(n)&&(null==(i=(o=d._contextLogger).syncCachedEndEvents)||i.call(o)),f=function(e){try{var t,r=e?l(e):void 0;return r?"".concat(null!=(t=r.tracking_params)?t:"","~0"):void 0}catch(e){return}},b={flushContextEvents:function(){return d.flushEvents()},logContextEvent:function(e){if(null!==e.event_type&&void 0!==e.event_type){var t=e.clientTrackingParams||f(e.object_id_str);d.addEvent(m(m({},e),{},{clientTrackingParams:t}),b.injectSetViewContextDataFromHook)}},logImpression:function(e){var t=e.auxData,r=e.component,n=e.eventData,i=e.eventType,o=e.impressionType,a=e.objectIdStr,s=e.viewData,l=e.viewParameter,c=e.viewType,u=e.element;null!=i&&d.addEvent({event_type:i,event_data:v({},o,n),component:r,object_id_str:a,aux_data:t,view_type:c,view_parameter:l,view_data:s,element:u},b.injectSetViewContextDataFromHook)}},P=(0,p.w)({contextLogger:b}),a.Z.contextLogger=b,b},[r]);return(0,z.jsx)(o.B,{value:l,children:t})}function eN(e){var t=e.children,r=e.reduxStore,o=(e.serverState,function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,eD)),s=(0,n.useRef)(!1),l=(0,n.useMemo)(function(){return new R.ZP},[]);if(!s.current){if(window){var c={},u=function(e,t){var r=decodeURIComponent(t),n=new Promise(function(t){c[e]||(c[e]={}),c[e][r]=t});l.add(e,r,n)},_=function(e){var t,n,i=(0,j.Z)(e),o=i.normalizedResponse,s=i.options,l=i.resource,u=i.response,_=i.schema;u.resource_response.error?408!==u.resource_response.error.http_status&&r.dispatch((0,O.Tl)(l,s,u.resource_response.error)):(a.Z.fetchCompleteCallback&&a.Z.fetchCompleteCallback({resource:l,options:s,response:u,normalizedResponse:o,refresh:!1,resourceSchema:_}),r.dispatch((0,O.Sr)(l,s,u,o,!1,_))),null==(t=c[l])||null==(n=t[(0,D.Z)(s)])||n.call(t)};window.__PWS_RESOURCE_PENDING_FETCH_HANDLER__=u,window.__PWS_RESOURCE_SSR_HANDLER__=_;var d=Object.keys(window.__PWS_RESOURCE_PENDING_BEFORE_INIT__);d.length&&(d.forEach(function(e){window.__PWS_RESOURCE_PENDING_BEFORE_INIT__[e].forEach(function(t){u(e,t)})}),window.__PWS_RESOURCE_PENDING_BEFORE_INIT__={}),window.__PWS_RESOURCE_DATA_BEFORE_INIT__.length&&(window.__PWS_RESOURCE_DATA_BEFORE_INIT__.forEach(_),window.__PWS_RESOURCE_DATA_BEFORE_INIT__=[])}s.current=!0}return(0,z.jsx)(eT,ej(ej({},o),{},{children:(0,z.jsx)(R.F_,{value:l,children:(0,z.jsx)(i.zt,{store:r,children:(0,z.jsx)(ez.fJ,{children:(0,z.jsx)(eL._S,{children:(0,z.jsx)(eI.kY,{children:(0,z.jsx)(eR,{children:(0,z.jsx)(eB,{children:(0,z.jsx)(w.FH,{children:(0,z.jsx)(L,{children:(0,z.jsx)(Z,{children:(0,z.jsx)(x.GF,{children:t})})})})})})})})})})})}))}},465739:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){var i;return(i=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==n(i)?i:i+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{ES:function(){return u},I3:function(){return c},TY:function(){return _},YX:function(){return s},aD:function(){return l}});var o,a,s=1e4,l=300,c=[9,3],u=(i(o={},13,"VIEW"),i(o,4703,"TIMED_PAIR_END"),i(o,82,"PIN_SAVE_TO_DEVICE"),i(o,8948,"PIN_CLICK"),o),_=(i(a={},9,"LOGIN"),i(a,3,"PIN"),i(a,186,"OFF_PINTEREST"),i(a,11,"BROWSER"),a)},209750:function(e,t,r){r.d(t,{li:function(){return J},Ch:function(){return U},nc:function(){return Q},a:function(){return $},ZP:function(){return K},cA:function(){return W}});var n,i,o,a=r(347564),s=r(430037),l=r(27399),c=r(578382),u=r(11442),_=r(465739);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}var b="exponential";function h(e,t){var r=Math.max(e,0),n=Math.max(t,r);return Math.floor(r+Math.random()*(n-r+1))}var m=function(){var e;function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!(this instanceof t))throw TypeError("Cannot call a class as a function");p(this,"strategy",b),p(this,"attempts",0),this.strategy=null!=(e=r.strategy)?e:b}return e=[{key:"changeStrategy",value:function(e){this.strategy=e,this.attempts=0}},{key:"next",value:function(){var e=function(e,t){if(e===b){var r=1e4*Math.pow(2,t);return h(Math.min(r,9e5),Math.min(Math.floor(1.5*r),9e5))}var n=Math.max(6e5-6e4*t,0);return Math.max(Math.min(h(n,n*(1+.5*Math.pow(.6,t))),9e5),6e4)}(this.strategy,this.attempts);return this.attempts+=1,e}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(),v=["element","eventData","component","objectId","view","viewParameter","viewData","durationNs","pairId","clientTrackingParams"],g=r(71133),y=r(746868),P=r(997776),A=r(730056),w=r(424868),x=r(907049),E=r(762693),k=r(767415),S=["object_id_str"],T=["cache_created_time","isImpression"];function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function I(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function C(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){I(o,n,i,a,s,"next",e)}function s(e){I(o,n,i,a,s,"throw",e)}a(void 0)})}}function D(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=j(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function O(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||j(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"==typeof e)return R(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach(function(t){Z(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Z(e,t,r){var n;return(n=function(e,t){if("object"!=z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=z(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==z(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=new Set([6945,170,3700]),M=new Set([3700]),U=(Z(n={},3829,"articleImpressions"),Z(n,18,"pinImpressions"),Z(n,3700,"boardImpressions"),Z(n,3803,"searchImpressions"),Z(n,170,"storyImpression"),Z(n,3704,"userImpressions"),n),H=[4700,4701,4702,4703,7042,7043],V=function(e){return(0,P.Z)(JSON.stringify(e))},G=function(e){return F.has(e)};function q(){var e=new Date;i?i&&i.getUTCDate()!==e.getUTCDate()&&(i=e,(0,u.Z)()):i=e}var W=function(e){var t=e.event_type,r=H.includes(t),n=(0,y.BE)();return!!r||13===t||!!n},J=function(e,t){var r=e.event_type,n=H.includes(r),i=(0,y.BE)();return n?e:13===r&&e.view_type?(null==t||t({viewType:e.view_type,viewParameter:e.view_parameter,viewData:null!=i&&i.viewData?(0,A.Z)(i.viewData,e.view_data):e.view_data}),e):!i||e.view_type&&e.view_parameter?e:N(N({},e),{},{view_type:i.viewType||e.view_type,view_parameter:i.viewParameter,view_data:e.view_data?(0,A.Z)(e.view_data,i.viewData):i.viewData})},Y=function(e){var t={};return null!=e&&e.storyPinProductEventData&&(t=N(N({},t),{},{storyPinProductEventData:e.storyPinProductEventData})),t},Q=function(e,t){var r,n,i=e.component,o=e.element,a=e.object_id_str,s=e.view_type,l=e.event_type,c=e.appState;return null!=(r=((null==(n=e.event_data)?void 0:n[t])||[]).map(function(r){return N(N(N(N(N(N({auxData:e.aux_data},i?{component:i}:{}),{},{eventData:r},l?{eventType:l}:{}),s?{viewType:s}:{}),{},{viewData:e.view_data,viewParameter:e.view_parameter},a?{objectIdStr:a}:null),{},{impressionType:t},Y(e.event_data)),{},{appState:c},o?{element:o}:{})}))?r:[]},$=function(e,t){return N(N(N(N({},e.component?{component:e.component}:{}),e.object_id_str?{objectIdStr:e.object_id_str}:null),e.view_type?{viewType:e.view_type}:{}),{},{eventType:e.event_type,auxData:e.aux_data,impressionType:t,viewData:e.view_data,viewParameter:e.view_parameter,eventData:e.event_data})};function K(e,t){var r=[],n=[],i=0;function u(){return[].concat(O(r),O(n.reduce(function(e,t){var r=e.find(function(e){return e.view_type===t.viewType&&e.view_parameter===t.viewParameter&&e.event_type===t.eventType&&e.object_id_str===t.objectIdStr&&(0,x.Z)(e.view_data,t.viewData)});if(r&&!G(t.eventType))t.impressionType in r.event_data?r.event_data[t.impressionType].push(t.eventData):r.event_data[t.impressionType]=[t.eventData];else{var n,i=t.storyPinProductEventData?{storyPinProductEventData:t.storyPinProductEventData}:{},o={appState:t.appState,aux_data:t.auxData||{},clientUUID:(0,a.Z)(),component:t.component,event_data:N(N({},i),{},Z({},t.impressionType,!G(n=t.eventType)||G(n)&&M.has(n)?[t.eventData]:N(N({},t.eventData),(t.eventData||{})[t.impressionType]))),event_type:t.eventType,object_id_str:t.objectIdStr||void 0,time:(0,g.ZP)(),view_data:t.viewData,view_parameter:t.viewParameter,view_type:t.viewType,element:t.element};e.push(o)}return e},[])))}function d(e){var t,r,n=e.error,i=e.isError,o=e.isDroppedEvent,a=e.isImpression,l=e.isEventSkipped,c=(0,s.Z)(),u=(null==c?void 0:c.userAgent)||{},_=!(u.isMobile||u.isTablet),d={error_message:null!=(t=null==n?void 0:n.message)?t:"unknown",appType:_?"WEB_DENZEL":"WEB_MOBILE",country:null!=(r=null==c?void 0:c.country)?r:"unknown",browserName:u.browserName,osName:u.osName,browserType:u.browserType,browserVersion:u.browserVersion,isError:i,isImpression:a,isEventSkipped:l};(0,k.nP)("".concat("webapp.metrics.contextLog.indexdb.").concat(o?"dropped":i?"errors":l?"skipped":"success"),{tags:d})}function p(){return f.apply(this,arguments)}function f(){return(f=C(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,null==(t=o)?void 0:t.clear();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),d({isError:!0,error:{message:"Error while clearing cache",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(r=e.t0.stack)?r:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 8:case"end":return e.stop()}},e,null,[[0,5]])}))).apply(this,arguments)}function h(){r=[],n=[],i=0}function y(){return(y=C(regeneratorRuntime.mark(function e(t){var r,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=N(N({},t),{},{cache_created_time:(0,g.ZP)(),isImpression:!1,aux_data:N(N({},t.aux_data),{},{is_context_cached:!0})}),e.next=4,null==(r=o)?void 0:r.setItem((0,a.Z)(),n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d({isError:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(i=e.t0.stack)?i:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}function P(){return(P=C(regeneratorRuntime.mark(function e(t){var r,n,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=N(N({},t),{},{cache_created_time:(0,g.ZP)(),isImpression:!0,auxData:N(N({},t.auxData),{},{is_impression_cached:!0})}),e.next=4,null==(r=o)?void 0:r.setItem((0,a.Z)(),n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),d({isError:!0,isImpression:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(i=e.t0.stack)?i:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[0,6]])}))).apply(this,arguments)}function A(){return z.apply(this,arguments)}function z(){return(z=C(regeneratorRuntime.mark(function r(){var n,i,o,a,d,f;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(n=u(),i=0,o=new m,n.length){r.next=5;break}return r.abrupt("return");case 5:a=(0,g.ZP)(),t||(d=l.Z.create("ApiCResource",{events:n,report_time:a})),(f=function(){var e=C(regeneratorRuntime.mark(function e(){var r,u,_,h,m,v,y,P;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=(0,g.ZP)(),t&&(d=l.Z.create("ApiCResource",{events:n,report_time:a})),e.next=5,d.callCreate({async:!0,showError:!1});case 5:p(),e.next=22;break;case 8:if(e.prev=8,e.t0=e.catch(0),u=!(null!=(r=(0,c.hw)(e.t0))&&r.api_error_code)||[w.dO,w.cZ,w.i1].includes(r.api_error_code),_=(null==r?void 0:r.api_error_code)===w.QY||(null==r?void 0:r.httpStatus)===400,!function(e){var t,r=e.retryAttempts,n=e.error,i=e.events,o=(0,s.Z)(),a=(null==o?void 0:o.userAgent)||{},l=!(a.isMobile||a.isTablet),c=N(N({},n),{},{retryAttempts:r,appType:l?"WEB_DENZEL":"WEB_MOBILE",country:null!=(t=null==o?void 0:o.country)?t:"unknown",browserName:a.browserName,eventSize:i.length,osName:a.osName,browserType:a.browserType,browserVersion:a.browserVersion});(0,k.nP)("metrics_quality_web_retry_error_log",{tags:c})}({retryAttempts:i,error:r,events:n}),t){h=D(n);try{for(h.s();!(m=h.n()).done;)(y=m.value).aux_data=N(N({},y.aux_data),{},{error_class:w.qF.get(null!=(v=null==r?void 0:r.api_error_code)?v:-1)||"unknown"})}catch(e){h.e(e)}finally{h.f()}}if(!_){e.next=18;break}return p(),e.abrupt("return");case 18:u||null!=r&&r.httpStatus&&r.httpStatus>=500?o.changeStrategy("coolDown"):o.changeStrategy(b),P=o.next(),i+=1,setTimeout(f,P);case 22:case"end":return e.stop()}},e,null,[[0,8]])}));return function(){return e.apply(this,arguments)}}())(),function(t,r){if(e){var n,i=D(t);try{for(i.s();!(n=i.n()).done;){var o,a,s,l=n.value;(0,g.Q9)(l)&&(0,k.LY)("webapp.contextLogger.fastFlushEvents.latency",(r-l.time||0)/1e6,{sampleRate:1,tags:{event_type:_.ES[l.event_type],view_type:l.view_type?_.TY[l.view_type]:"unknown",cached:null!=(o=(null==(a=l.aux_data)?void 0:a.is_timed_pair_cached)||(null==(s=l.aux_data)?void 0:s.is_context_cached))?o:"false"}})}}catch(e){i.e(e)}finally{i.f()}}}(n,a),h(),q();case 12:case"end":return r.stop()}},r)}))).apply(this,arguments)}function I(){return(I=C(regeneratorRuntime.mark(function e(){var t,i,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=function(e){return(0,g.ZP)()-e<15e9},t=function(e){return(0,g.ZP)()-e>6048e11},e.prev=2,e.next=5,null==(a=o)?void 0:a.getAllItem();case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0=[];case 8:e.t0.forEach(function(e){var o=e.value,a=o.cache_created_time,s=o.isImpression,l=L(o,T);t(a)?d({isDroppedEvent:!0,isError:!1}):i(a)?d({isEventSkipped:!0}):s?(n.push(l),d({isImpression:!0,isError:!1})):(r.push(l),d({isError:!1}))}),e.next=15;break;case 12:e.prev=12,e.t1=e.catch(2),d({isError:!0,error:{message:"Error while syncing cached events",details:e.t1 instanceof Error?e.t1.message:"Unknown error",stack_trace:e.t1 instanceof Error&&null!=(s=e.t1.stack)?s:"No stack trace available",errorName:e.t1 instanceof Error?e.t1.name:"N/A"}});case 15:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}return{flushContextEvents:A,getContextEvents:u,logContextEvent:function(e){var t,n=e.object_id_str,o=L(e,S),s=(0,g.ZP)(),l=N(N({aux_data:{},event_data:{},view_data:{}},o),{},{time:s,clientUUID:(0,a.Z)()},n?{object_id_str:n}:null),c=(t=l.aux_data)?(t.element,t.eventData,t.component,t.objectId,t.view,t.viewParameter,t.viewData,t.durationNs,t.pairId,t.clientTrackingParams,function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(t,v)):t;l=N(N({},l),{},{aux_data:c}),i+V(l)>20480&&A(),r.push(l),i+=V(l),q(),function(e){y.apply(this,arguments)}(l)},logImpression:function(e){i+V(e)>20480&&A(),n.push(e),i+=V(e),function(e){P.apply(this,arguments)}(e)},resetEventsBuffer:h,syncCachedEndEvents:function(){return I.apply(this,arguments)},_getIndexDBInstance:function(){return o},initiateIndexDBCache:function(){var e;null!=(e=window)&&e.indexedDB&&(o=o||new E.Z(window.indexedDB,"ContextLoggingDB","ContextLoggingTable"))}}}},71133:function(e,t,r){r.d(t,{Q9:function(){return o},sR:function(){return i}});var n=r(465739),i=function(){var e,t;return"undefined"!==document.hidden?(e="hidden",t="visibilitychange"):"undefined"!==document.msHidden?(e="msHidden",t="msvisibilitychange"):"undefined"!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),{hidden:e,visibilityChange:t}},o=function(e){switch(e.event_type){case 13:return!!e.view_type&&n.I3.includes(e.view_type);case 4703:if(3===e.view_type&&85===e.component&&(e.duration_ns||0)>=1e10||186===e.view_type||11===e.view_type)return!0;return!1;case 82:case 8948:return!0;default:return!1}};t.ZP=function(){return 1e6*Date.now()}},825541:function(e,t,r){r.d(t,{Z:function(){return l},d:function(){return s}});var n=r(387784),i=r(740097),o=r(24246),a=r(680811),s=i.J6;function l(e){var t=e.children,r=(0,o.Z)(),s=(0,n.useMemo)(function(){return{Accordion:{accessibilityCollapseLabel:r._('Collapse section', 'gestalt.accordion.accessibilityCollapseLabel', 'ARIA label for button to collapse the current accordion section'),accessibilityExpandLabel:r._('Expand section', 'gestalt.accordion.accessibilityExpandLabel', 'ARIA label for button to expand the current accordion section')},BannerOverlay:{accessibilityDismissButtonLabel:r._('Dismiss banner', 'gestalt.bannerOverlay.accessibilityDismissButtonLabel', 'ARIA label for button to dismiss the current banner overlay')},ActivationCard:{accessibilityDismissButtonLabel:r._('Dismiss', 'gestalt.activationCard.accessibilityDismissButtonLabel', 'ARIA label for button to dismiss the current activation card')},BannerCallout:{accessibilityDismissButtonLabel:r._('Dismiss banner', 'gestalt.callout.accessibilityDismissButtonLabel', 'ARIA label for button to dismiss the current callout'),iconAccessibilityLabelError:r._('Error', 'gestalt.callout.iconAccessibilityLabelError', 'ARIA label for icon indicating an error state'),iconAccessibilityLabelInfo:r._('Information', 'gestalt.callout.iconAccessibilityLabelInfo', 'ARIA label for icon indicating an information state'),iconAccessibilityLabelRecommendation:r._('Recommendation', 'gestalt.callout.iconAccessibilityLabelRecommendation', 'ARIA label for icon indicating a recommendation state'),iconAccessibilityLabelWarning:r._('Warning', 'gestalt.callout.iconAccessibilityLabelWarning', 'ARIA label for icon indicating a warning state'),iconAccessibilityLabelSuccess:r._('Success', 'gestalt.callout.iconAccessibilityLabelSuccess', 'ARIA label for icon indicating a success state')},BannerSlim:{accessibilityDismissButtonLabel:r._('Dismiss banner', 'gestalt.slimbanner.accessibilityDismissButtonLabel', 'ARIA label for button to dismiss the current slim banner'),iconAccessibilityLabelError:r._('Error', 'gestalt.slimbanner.iconAccessibilityLabelError', 'ARIA label for icon indicating an error state'),iconAccessibilityLabelInfo:r._('Information', 'gestalt.slimbanner.iconAccessibilityLabelInfo', 'ARIA label for icon indicating an information state'),iconAccessibilityLabelRecommendation:r._('Recommendation', 'gestalt.slimbanner.iconAccessibilityLabelRecommendation', 'ARIA label for icon indicating a recommendation state'),iconAccessibilityLabelWarning:r._('Warning', 'gestalt.slimbanner.iconAccessibilityLabelWarning', 'ARIA label for icon indicating a warning state'),iconAccessibilityLabelSuccess:r._('Success', 'gestalt.slimbanner.iconAccessibilityLabelSuccess', 'ARIA label for icon indicating a success state'),iconAccessibilityLabelDefault:r._('Pinterest logo', 'gestalt.slimbanner.iconAccessibilityLabelDefault', 'ARIA label for icon indicating Pinterest logo')},ButtonSocial:{textLinkEmail:r._('Link account to Email', 'gestalt.buttonsocial.textLinkEmail', 'Accessibility label for ButtonSocial'),textLinkFacebook:r._('Link account to Facebook', 'gestalt.buttonsocial.textLinkFacebook', 'Accessibility label for ButtonSocial'),textLinkGoogle:r._('Link account to Google', 'gestalt.buttonsocial.textLinkGoogle', 'Accessibility label for ButtonSocial'),textLinkApple:r._('Link account to Apple', 'gestalt.buttonsocial.textLinkApple', 'Accessibility label for ButtonSocial'),textLinkLine:r._('Link account to Line', 'gestalt.buttonsocial.textLinkLine', 'Accessibility label for ButtonSocial'),textLoginEmail:r._('Login with Email', 'gestalt.buttonsocial.textLoginEmail', 'Accessibility label for ButtonSocial'),textLoginFacebook:r._('Login with Facebook', 'gestalt.buttonsocial.textLoginFacebook', 'Accessibility label for ButtonSocial'),textLoginGoogle:r._('Login with Google', 'gestalt.buttonsocial.textLoginGoogle', 'Accessibility label for ButtonSocial'),textLoginApple:r._('Login with Apple', 'gestalt.buttonsocial.textLoginApple', 'Accessibility label for ButtonSocial'),textLoginLine:r._('Login with Line', 'gestalt.buttonsocial.textLoginLine', 'Accessibility label for ButtonSocial'),textContinueEmail:r._('Continue with Email', 'gestalt.buttonsocial.textContinueEmail', 'Accessibility label for ButtonSocial'),textContinueFacebook:r._('Continue with Facebook', 'gestalt.buttonsocial.textContinueFacebook', 'Accessibility label for ButtonSocial'),textContinueGoogle:r._('Continue with Google', 'gestalt.buttonsocial.textContinueGoogle', 'Accessibility label for ButtonSocial'),textContinueApple:r._('Continue with Apple', 'gestalt.buttonsocial.textContinueApple', 'Accessibility label for ButtonSocial'),textContinueLine:r._('Continue with Line', 'gestalt.buttonsocial.textContinueLine', 'Accessibility label for ButtonSocial'),textSignupEmail:r._('Sign up with Email', 'gestalt.buttonsocial.textSignupEmail', 'Accessibility label for ButtonSocial'),textSignupFacebook:r._('Sign up with Facebook', 'gestalt.buttonsocial.textSignupFacebook', 'Accessibility label for ButtonSocial'),textSignupGoogle:r._('Sign up with Google', 'gestalt.buttonsocial.textSignupGoogle', 'Accessibility label for ButtonSocial'),textSignupApple:r._('Sign up with Apple', 'gestalt.buttonsocial.textSignupApple', 'Accessibility label for ButtonSocial'),textSignupLine:r._('Sign up with Line', 'gestalt.buttonsocial.textSignupLine', 'Accessibility label for ButtonSocial')},ChartGraph:{accessibilityLabelPrefixText:r._('Chart graph.', 'gestalt.chartgraph.accessibilityLabelPrefixText', 'Prefix to ARIA label in chart image description'),defaultViewText:r._('Default view mode', 'gestalt.chartgraph.defaultViewText', 'Tooltip text in iconbutton to enable default view with no visual patterns'),accessibleViewText:r._('Visual pattern view', 'gestalt.chartgraph.accessibleViewText', 'Tooltip text in iconbutton to enable visual patterns for accessibility'),tabularData:r._('Tabular representation', 'gestalt.chartgraph.tabularData', 'Subtext in tabular data modal'),accessibilityLabelDismissModal:r._('Dismiss tabular representation modal', 'gestalt.chartgraph.accessibilityLabelDismissModal', 'ARIA label in dimiss button in modal'),tableSeriesText:r._('Series', 'gestalt.chartgraph.tableSeriesText', 'Table header for the series column'),tableXAxisText:r._('x-axis values', 'gestalt.chartgraph.tableXAxisText', 'Table header for the x axis column'),tableYAxisText:r._('y-axis values', 'gestalt.chartgraph.accessibilityLabelPrefixText', 'Table header for the y axis column'),downloadCsvButtonText:r._('Download as .csv', 'gestalt.chartgraph.downloadCsvButtonText', 'Text for the button to download data in a csv file '),cancelButtonText:r._('Cancel', 'gestalt.chartgraph.cancelButtonText', 'Text for the button to close modal')},ComboBox:{noResultText:r._('No results', 'gestalt.comboBox.noResultsText', 'Text to display when no results are found for a combobox'),accessibilityClearButtonLabel:r._('Clear input', 'gestalt.comboBox.accessibilityClearButtonLabel', 'ARIA label for button to clear the current input of a combobox')},DatePicker:{accessibilityDismissButtonLabel:r._('Dismiss date picker', 'gestalt.datepicker.accessibilityDismissButtonLabel', 'ARIA label for button to dismiss the current DatePicker calendar'),dismissButton:r._('Close', 'gestalt.datepicker.dismissButton', 'Text for button to dismiss the current DatePicker calendar'),openCalendar:r._('Open calendar', 'gestalt.datepicker.openCalendar', 'Accessibility label for calendar button that opens the calendar container'),previousMonth:r._('Navigate to previous month', 'gestalt.datepicker.previousMonth', 'Accessibility label for the button that navigates to the previous month in calendar'),nextMonth:r._('Navigate to next month', 'gestalt.datepicker.nextMonth', 'Accessibility label for the button that navigates to the next month in calendar')},DateRange:{applyText:r._('Apply', 'gestalt.daterange.apply', 'Confirmation button text to submit selected date range'),cancelText:r._('Cancel', 'gestalt.daterange.cancel', 'Cancel action to close DateRange')},HelpButton:{tooltipMessage:r._('Click to learn more', 'gestalt.helpButton.tooltipMessage', 'HelpButton tooltip message')},Link:{accessibilityNewTabLabel:r._('Opens a new tab', 'gestalt.linkRoleComponent.accessibilityNewTabLabel', 'Additional label text for ARIA label only active when link-type components open the url in a new tab'),accessibilityDownloadLabel:r._('Downloads a file', 'gestalt.linkRoleComponent.accessibilityDownloadLabel', 'Additional label text  only active when a link-type components downloads a file a shows a download icon')},Modal:{accessibilityDismissButtonLabel:r._('Dismiss modal', 'gestalt.modal.accessibilityDismissButtonLabel', 'ARIA label for button to dismiss the current modal')},Popover:{accessibilityDismissButtonLabel:r._('Dismiss popover', 'gestalt.popover.accessibilityDismissButtonLabel', 'ARIA label for button to dismiss the current popover')},OverlayPanel:{accessibilityDismissButtonLabel:r._('Dismiss overlay panel', 'gestalt.overlaypanel.accessibilityDismissButtonLabel', 'ARIA label for button to dismiss the current overlay panel'),dismissConfirmationMessage:r._('Are you sure you want to dismiss?', 'gestalt.sheet.dismissConfirmationMessage', 'Confirmation popover message preventing the user from unvoluntarily Sheet dismiss'),dismissConfirmationSubtext:r._('You will lose all of your changes. This cannot be undone', 'gestalt.sheet.dismissConfirmationSubtext', 'Confirmation popover subtext preventing the user from unvoluntarily Sheet dismiss'),dismissConfirmationPrimaryActionText:r._('Yes, dismiss', 'gestalt.sheet.dismissConfirmationPrimaryActionText', 'Confirmation popover button confirming Sheet dismiss'),dismissConfirmationPrimaryActionTextLabel:r._('Yes, dismiss the overlay panel', 'gestalt.overlaypanel.dismissConfirmationPrimaryActionTextLabel', 'Confirmation popover button accessibility label preventing OverlayPanel dismiss'),dismissConfirmationSecondaryActionText:r._('No, go back', 'gestalt.sheet.dismissConfirmationSecondaryActionText', 'Confirmation popover button preventing Sheet dismiss'),dismissConfirmationSecondaryActionTextLabel:r._('No, go back to the sheet', 'gestalt.sheet.dismissConfirmationSecondaryActionTextLabel', 'Confirmation popover button accessibility label preventing Sheet dismiss')},SheetMobile:{accessibilityDismissButtonLabel:r._('Dismiss bottom sheet', 'gestalt.sheetmobile.dismissButtonAccessibilityLabel', 'Accessibility label for the dismiss button in SheetMobile'),accessibilityGrabberLabel:r._('Grabber', 'gestalt.sheetmobile.grabberAccessibilityLabel', 'Accessibility label for the grabber on SheetMobile'),accessibilityLabel:r._('Bottom sheet', 'gestalt.sheetmobile.accessibilityLabel', 'Accessibility label for the overall SheetMobile')},SideNavigation:{accessibilityDismissButtonLabel:r._('Dismiss side navigation.', 'gestalt.sidenavigation.accessibilityDismissButtonLabel', 'ARIA label for button to dismiss the current side navigation'),accessibilityCollapseButtonLabel:r._('Collapse side navigation panel.', 'gestalt.sidenavigation.accessibilityCollapseButtonLabel', 'ARIA label for icon button to collapse the current side navigation'),accessibilityExpandButtonLabel:r._('Expand side navigation panel.', 'gestalt.sidenavigation.accessibilityExpandButtonLabel', 'ARIA label for icon button to expand the current side navigation'),accessibilityEllipsisLabel:r._('Section.', 'gestalt.sidenavigation.accessibilityEllipsisLabel', 'ARIA label for icon button that represents a section')},Spinner:{accessibilityLabel:r._('Loading', 'gestalt.spinner.accessibilityLabel', 'ARIA label for Gestalt Spinner loading icon')},TableOfContents:{accessibilityLabel:r._('Table of contents', 'gestalt.tableOfContents.accessibilityLabel', 'ARIA label for navigation landmark')},Tabs:{accessibilityNotificationLabel:r._('This tab is displaying a notification indicator', 'gestalt.tab.accessibilityNotificationLabel', 'ARIA label for a tab displaying a red dot notification')},Tag:{accessibilityErrorIconLabel:r._('Error', 'gestalt.tag.accessibilityErrorIconLabel', 'ARIA label for icon indicating an error state'),accessibilityRemoveIconLabel:r._('Remove tag', 'gestalt.tag.accessibilityRemoveIconLabel', 'ARIA label for icon button to remove the tag'),accessibilityWarningIconLabel:r._('Warning', 'gestalt.tag.accessibilityWarningIconLabel', 'ARIA label for icon indicating a warning state')},TagData:{accessibilityRemoveIconLabel:r._('Remove tag', 'gestalt.tagData.accessibilityRemoveIconLabel', 'ARIA label for icon button to remove the tag')},TextField:{accessibilityHidePasswordLabel:r._('Hide password', 'gestalt.textField.accessibilityHidePasswordLabel', 'ARIA label / tooltip text for button to hide (obfuscate) password in input field'),accessibilityShowPasswordLabel:r._('Show password', 'gestalt.textField.accessibilityShowPasswordLabel', 'ARIA label / tooltip text for button to show (de-obfuscate) password in input field')},Toast:{accessibilityDismissButtonLabel:r._('Dismiss message', 'gestalt.toast.accessibilityDismissButtonLabel', 'ARIA label for dismiss icon button'),accessibilityIconSuccessLabel:r._('Success message', 'gestalt.toast.accessibilityIconSuccessLabel', 'ARIA label for success icon'),accessibilityIconErrorLabel:r._('Error message', 'gestalt.toast.accessibilityIconErrorLabel', 'ARIA label for error icon'),accessibilityProcessingLabel:r._('Processing message', 'gestalt.toast.accessibilityProcessingLabel', 'ARIA label for spinner')},BannerUpsell:{accessibilityDismissButtonLabel:r._('Dismiss banner', 'gestalt.upsell.accessibilityDismissButtonLabel', 'ARIA label for button to dismiss the current upsell')},Video:{accessibilityMaximizeLabel:r._('Maximize', 'gestalt.video.accessibilityMaximizeLabel', 'ARIA label for button to maximize video player'),accessibilityMinimizeLabel:r._('Minimize', 'gestalt.video.accessibilityMinimizeLabel', 'ARIA label for button to minimize video player'),accessibilityMuteLabel:r._('Mute', 'gestalt.video.accessibilityMuteLabel', 'ARIA label for button to mute video player'),accessibilityPauseLabel:r._('Pause', 'gestalt.video.accessibilityPauseLabel', 'ARIA label for button to pause video player'),accessibilityPlayLabel:r._('Play', 'gestalt.video.accessibilityPlayLabel', 'ARIA label for button to play video player'),accessibilityProgressLabel:r._('Video progress', 'gestalt.video.accessibilityProgressLabel', 'ARIA label for video progress bar'),accessibilityUnmuteLabel:r._('Unmute', 'gestalt.video.accessibilityUnmuteLabel', 'ARIA label for button to unmute video player'),accessibilityHideCaptionsLabel:r._('Hide captions', 'gestalt.video.accessibilityHideCaptionsLabel', 'ARIA label for hide captions button'),accessibilityShowCaptionsLabel:r._('Show captions', 'gestalt.video.accessibilityShowCaptionsLabel', 'ARIA label for show captions button')},SearchField:{accessibilityClearButtonLabel:r._('Clear input', 'gestalt.searchfield.accessibilityClearButtonLabel', 'ARIA label for button to clear the current input')},Attribution:{textSponsored:r._('Sponsored', 'gestalt.attribution.textSponsored', 'Text indicating sponsored content'),accessibilityVerifiedMerchant:r._('Verified merchant', 'gestalt.attribution.accessibilityVerifiedMerchant', 'ARIA label for verified merchant badge'),accessibilityVerifiedPinner:r._('Verified Pinner', 'gestalt.attribution.accessibilityVerifiedPinner', 'ARIA label for verified pinner badge')}}},[r]);return(0,a.jsx)(i.J6,{labels:s,children:t})}},651263:function(e,t,r){r.d(t,{T:function(){return i}});var n=(0,r(213491).Z)("NotificationContext"),i=n.Provider;t.Z=n.get},169166:function(e,t,r){t.Z=(0,r(387784).createContext)(null)},506807:function(e,t,r){t.Z=(0,r(387784).createContext)(null)},762693:function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,l,"next",e)}function l(e){i(a,n,o,s,l,"throw",e)}s(void 0)})}}function a(e){var t=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==n(t)?t:t+""}r.d(t,{Z:function(){return s}});var s=function(){var e,t,r,n,i,s,l,c,u;function _(e){var t,r,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"myDatabase",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"myStore";if(!(this instanceof _))throw TypeError("Cannot call a class as a function");t="cache",r=new Map,(t=a(t))in this?Object.defineProperty(this,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[t]=r,this.dbName=i,this.storeName=s,this.dbPromise=o(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,n.initializeDB(e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",null);case 9:case"end":return t.stop()}},t,null,[[0,6]])}))()}return u=[{key:"initializeDB",value:(e=o(regeneratorRuntime.mark(function e(t){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){try{var i=t.open(r.dbName,1);i.onerror=function(){n(Error("IndexedDB initialization error: "+i.error))},i.onupgradeneeded=function(){var e=i.result;e.objectStoreNames.contains(r.storeName)||e.createObjectStore(r.storeName,{keyPath:"key"})},i.onsuccess=function(){e(i.result)}}catch(e){n(Error("IndexedDB initialization error: "+e))}}));case 1:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})},{key:"reopenDatabaseIfClosed",value:(t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dbPromise;case 2:if(!((t=e.sent)&&!t.close)){e.next=5;break}return e.abrupt("return",t);case 5:return this.dbPromise=this.initializeDB(window.indexedDB),e.abrupt("return",this.dbPromise);case 7:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})},{key:"getObjectStore",value:(r=o(regeneratorRuntime.mark(function e(){var t,r,n=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"readwrite",e.next=3,this.reopenDatabaseIfClosed();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",r.transaction(this.storeName,t).objectStore(this.storeName));case 7:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"getItem",value:(n=o(regeneratorRuntime.mark(function e(t){var r,n,i=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache.has(t)){e.next=2;break}return e.abrupt("return",null!=(r=this.cache.get(t))?r:null);case 2:return e.next=4,this.getObjectStore();case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return e.abrupt("return",new Promise(function(e,r){var o=n.get(t);o.onerror=function(){return r(o.error)},o.onsuccess=function(){var r,n=(null==(r=o.result)?void 0:r.value)||null;null!==n&&i.cache.set(t,n),e(n)}}));case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getAllItem",value:(i=o(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getObjectStore();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",null);case 5:return e.abrupt("return",new Promise(function(e,n){var i=t.getAll();i.onerror=function(){return n(i.error)},i.onsuccess=function(){var t;null==(t=i.result)||t.forEach(function(e){r.cache.set(e.key,e.value)}),e(i.result)}}));case 6:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},{key:"setItem",value:(s=o(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.cache.set(t,r),e.next=3,this.getObjectStore();case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",new Promise(function(e,i){var o=n.put({key:t,value:r});o.onerror=function(){i(o.error)},o.onsuccess=function(){e(null)}}));case 7:case"end":return e.stop()}},e,this)})),function(e,t){return s.apply(this,arguments)})},{key:"removeItem",value:(l=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.cache.delete(t),e.next=3,this.getObjectStore();case 3:if(r=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",new Promise(function(e,n){var i=r.delete(t);i.onerror=function(){return n(i.error)},i.onsuccess=function(){return e(null)}}));case 7:case"end":return e.stop()}},e,this)})),function(e){return l.apply(this,arguments)})},{key:"clear",value:(c=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.cache.clear(),e.next=3,this.getObjectStore();case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",new Promise(function(e,r){var n=t.clear();n.onerror=function(){return r(n.error)},n.onsuccess=function(){return e(null)}}));case 7:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)})}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}(_.prototype,u),Object.defineProperty(_,"prototype",{writable:!1}),_}()},209045:function(e,t,r){r.d(t,{w:function(){return A}});var n,i=r(430037),o=r(71133),a=r(762693),s=r(141483),l=r(629724),c=r(767415);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,r,n,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void r(e)}s.done?t(l):Promise.resolve(l).then(n,i)}function d(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var o=e.apply(t,r);function a(e){_(o,n,i,a,s,"next",e)}function s(e){_(o,n,i,a,s,"throw",e)}a(void 0)})}}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){b(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function b(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=u(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}var m=null,v="ACTIVE",g="PAUSED",y=function(){return window&&window.performance&&window.performance.now?"(Time: ".concat((window.performance.now()/1e3).toFixed(3),"s)"):""},P=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}};function A(e){var t,r=e.contextLogger;if(n||(n=null!=(t=window)&&t.indexedDB?new a.Z(window.indexedDB,"EventLoggingDB","TimeSpent"):null),m)return m;var u=new Map,_=(0,l.Z)()&&(0,l.Z)().debug_timespent,p=[],A=_?console:{error:function(){},log:function(){},group:function(){},groupEnd:function(){}};return console.group||(A.group=function(){var e;return(e=console).log.apply(e,arguments)},A.groupEnd=function(){}),m=new(function(){var e;function t(){var e,a,l,h,m=this;if(!(this instanceof t))throw TypeError("Cannot call a class as a function");b(this,"appTimedPair",null),b(this,"clickthroughProperties",null),b(this,"historyStackContext",null),b(this,"offsiteTimedPair",null),b(this,"offsiteTimedPairForegroundId",null),b(this,"pins",Object.freeze({})),b(this,"addEventListeners",function(){var e=(0,o.sR)(),t=e.hidden,r=e.visibilityChange;r&&document.addEventListener(r,function(e){document[t]?m.unregisterApp(void 0,e):m.registerApp()},!1),window.addEventListener("focus",m.registerApp),window.addEventListener("blur",function(e){return m.unregisterApp(void 0,e)});var n=P(function(e){return m.unregisterApp(void 0,e)});window.addEventListener("beforeunload",n),window.addEventListener("pagehide",n);var i=navigator&&navigator.userAgent.toLowerCase();i&&i.includes("macintosh")&&i.includes("chrome")&&window.addEventListener("popstate",function(){document.hasFocus()||document[t]||(0,c.nP)("chrome_mac_back_forward_button",{sampleRate:1})})}),b(this,"storeClickthroughProperties",function(e){m.clickthroughProperties&&(0,c.nP)("webapp.metrics.clickthroughs.overwritten",{sampleRate:1,tags:{previousView:m.clickthroughProperties.view_type,previousViewParameter:m.clickthroughProperties.view_parameter,nextView:e.view_type,nextViewParameter:e.view_parameter}}),m.clickthroughProperties=f({time:(0,o.ZP)()},e)}),b(this,"clearClickthroughProperties",function(){m.clickthroughProperties=null,m.offsiteTimedPair=null,m.offsiteTimedPairForegroundId=null}),b(this,"registerApp",function(){A.group("App Foreground",y()),null==m.appTimedPair?(m.appTimedPair=new s.Z,m.appTimedPair.start(),m._unpauseAllComponents(),m._endOffsiteTimedPair(),null!==m.appTimedPair&&void 0!==m.appTimedPair&&r.logContextEvent({event_type:4700,pair_id:m.appTimedPair.uuid})):A.error("TimedPair already exists for app."),A.groupEnd()}),b(this,"logIndexDbStatLog",function(e){var t,r,n,o,a,s=e.error,l=e.isError,u=e.isDroppedEvent,_=(0,i.Z)(),d=(null==_?void 0:_.userAgent)||{},p=!(d.isMobile||d.isTablet),f={error_message:null!=(t=null==s?void 0:s.message)?t:"unknown",appType:p?"WEB_DENZEL":"WEB_MOBILE",country:null!=(r=null==_?void 0:_.country)?r:"unknown",browserName:d.browserName,osName:d.osName,browserType:d.browserType,browserVersion:d.browserVersion,isError:l,errorName:null!=(n=null==s?void 0:s.errorName)?n:"unknown",errorDetails:null!=(o=null==s?void 0:s.details)?o:"unknown",errorStackTrace:null!=(a=null==s?void 0:s.stack_trace)?a:"unknown"};(0,c.nP)("".concat("webapp.metrics.timespent.indexdb.").concat(u?"dropped":l?"errors":"success"),{tags:f})}),b(this,"unregisterApp",function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;A.group("App Background",y());var n=m.appTimedPair;if(null!=n){m._pauseAllComponents();var i=n.end();m._startOffsiteTimedPair(),r.logContextEvent({event_type:4701,duration_ns:i,pair_id:n.uuid}),m.appTimedPair=null}else A.error("No TimedPair found for app.");var o=["beforeunload","pagehide"],a=o.includes((null==t?void 0:t.type)||""),s=o.includes((null==t?void 0:t.pauseReason)||"");(a||s)&&m._endOffsiteTimedPair(),e||r.flushContextEvents(),A.groupEnd()}),b(this,"_activateComponent",function(e){A.group("Activating component",y()),_&&A.log(e.getContext());var t=e.getTimedPair();if(t){t.start();var n=e.getLoggerContext(),i=n.view,o=n.viewParameter,a=n.component,s=n.element,l=n.objectId,c=n.clientTrackingParams;r.logContextEvent({event_type:4702,view_type:i,view_parameter:o,component:a,element:s,object_id_str:l,view_data:e.props.viewData,pair_id:t.uuid,clientTrackingParams:c,aux_data:f({time_spent_foreground_pairid:m.appTimedPair&&m.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}A.groupEnd()}),b(this,"_deactivateComponent",function(e){A.group("Deactivating component",y()),_&&A.log(e.getContext());var t=e.getTimedPair();if(t){var n=t.view,i=t.viewParameter,o=t.component,a=t.element,s=t.objectId,l=t.clientTrackingParams,c=t.end();r.logContextEvent({event_type:4703,view_type:n,view_parameter:i,component:o,element:a,object_id_str:s,view_data:e.props.viewData,duration_ns:c,pair_id:t.uuid,clientTrackingParams:l,aux_data:f({time_spent_foreground_pairid:m.appTimedPair&&m.appTimedPair.uuid,time_spent_parent_pairid:e.getParentId()},e.props.auxData)})}A.groupEnd()}),b(this,"_startOffsiteTimedPair",function(){var e,t;m.clickthroughProperties&&(m.offsiteTimedPair=new s.Z({view:186,viewParameter:m.clickthroughProperties.view_parameter,objectId:m.clickthroughProperties.object_id_str}),m.offsiteTimedPair.start(),m.offsiteTimedPairForegroundId=m.appTimedPair?m.appTimedPair.uuid:null,m.clickthroughProperties=f(f({},m.clickthroughProperties),{},{aux_data:f(f({},m.clickthroughProperties.aux_data),{},{time_to_offsite:void 0!==m.clickthroughProperties.time&&null!==m.clickthroughProperties.time&&"number"==typeof m.clickthroughProperties.time?(0,o.ZP)()-m.clickthroughProperties.time:void 0})}),r.logContextEvent(f(f({},m.clickthroughProperties),{},{event_type:4702,view_type:186,pair_id:m.offsiteTimedPair?m.offsiteTimedPair.uuid:null,aux_data:f(f({},m.clickthroughProperties.aux_data),{},{time_spent_foreground_pairid:m.offsiteTimedPairForegroundId})})),m._addOffSitePairToIndexDB({offsiteTimedPairUUID:null==(e=m.offsiteTimedPair)?void 0:e.uuid,clickthroughProperties:m.clickthroughProperties,timeCreated:null==(t=m.offsiteTimedPair)?void 0:t.startTime,offsiteTimedPairForegroundId:m.offsiteTimedPairForegroundId}))}),b(this,"_endOffsiteTimedPair",function(){var e=m.offsiteTimedPair,t=m.clickthroughProperties;if(e&&t){var n,i=e.end();r.logContextEvent(f(f({},t),{},{event_type:4703,view_type:186,pair_id:m.offsiteTimedPair?m.offsiteTimedPair.uuid:null,aux_data:f(f({},t.aux_data),{},{time_spent_foreground_pairid:m.offsiteTimedPairForegroundId}),duration_ns:i})),m._removeOffSitePairByIdFromIndexDB(null==(n=m.offsiteTimedPair)?void 0:n.uuid),m._syncCachedTimedPairEndEvents(),m._onOffsiteEnd(),m.clearClickthroughProperties()}else m._syncCachedTimedPairEndEvents()}),b(this,"_addOffSitePairToIndexDB",(e=d(regeneratorRuntime.mark(function e(t){var r,i,o,a,s,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.offsiteTimedPairUUID,i=t.clickthroughProperties,o=t.timeCreated,a=t.offsiteTimedPairForegroundId,e.prev=1,e.next=4,null==(s=n)?void 0:s.setItem(r,{clickthroughProperties:f({},i),timeCreated:o,offsiteTimedPairForegroundId:a});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),m.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(l=e.t0.stack)?l:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[1,6]])})),function(t){return e.apply(this,arguments)})),b(this,"_addAppTimerToIndexDB",(a=d(regeneratorRuntime.mark(function e(t){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.foregroundAppTimerUUID,i=t.timeCreated,e.prev=1,e.next=4,null==(o=n)?void 0:o.setItem(r,{timeCreated:i});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),m.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be added",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(a=e.t0.stack)?a:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 9:case"end":return e.stop()}},e,null,[[1,6]])})),function(e){return a.apply(this,arguments)})),b(this,"_removeAppTimerFromIndexDB",(l=d(regeneratorRuntime.mark(function e(t){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.foregroundAppTimerUUID,e.prev=1,r){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,null==(i=n)?void 0:i.removeItem(r);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),m.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(o=e.t0.stack)?o:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 11:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return l.apply(this,arguments)})),b(this,"_removeOffSitePairByIdFromIndexDB",(h=d(regeneratorRuntime.mark(function e(t){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,null==(r=n)?void 0:r.removeItem(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),m.logIndexDbStatLog({isError:!0,error:{message:"Transaction could not be removed",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(i=e.t0.stack)?i:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(e){return h.apply(this,arguments)})),b(this,"_syncCachedTimedPairEndEvents",d(regeneratorRuntime.mark(function e(){var t,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(e){return(0,s.h)()-e>864e11},e.prev=1,e.next=4,null==(i=n)?void 0:i.getAllItem();case 4:return(e.sent||[]).forEach(function(){var e=d(regeneratorRuntime.mark(function e(n){var i,o,a,l,c,u,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=n.key,a=(o=n.value).clickthroughProperties,l=o.timeCreated,c=o.offsiteTimedPairForegroundId,u=(0,s.h)(),_=l?u-l:null,l&&t(l)?m.logIndexDbStatLog({isDroppedEvent:!0,isError:!1}):(r.logContextEvent(f(f({},a),{},{event_type:4703,view_type:186,pair_id:i||null,aux_data:f(f({},null==a?void 0:a.aux_data),{},{time_spent_foreground_pairid:c,is_timed_pair_cached:!0}),duration_ns:_})),m.logIndexDbStatLog({isError:!1}));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),e.next=8,null==(o=n)?void 0:o.clear();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),m.logIndexDbStatLog({isError:!0,error:{message:"Error while syncing cached events",details:e.t0 instanceof Error?e.t0.message:"Unknown error",stack_trace:e.t0 instanceof Error&&null!=(a=e.t0.stack)?a:"No stack trace available",errorName:e.t0 instanceof Error?e.t0.name:"N/A"}});case 13:case"end":return e.stop()}},e,null,[[1,10]])}))),b(this,"_onOffsiteEnd",function(){A.group("Trigger onOffsiteEndCallbacks"),p.forEach(function(e){return e({appTimedPair:m.appTimedPair,clickthroughProperties:m.clickthroughProperties,offsiteTimedPair:m.offsiteTimedPair,offsiteTimedPairForegroundId:m.offsiteTimedPairForegroundId})}),A.groupEnd()}),b(this,"_pauseAllComponents",function(){A.group("Pause all components"),u.forEach(function(e,t,r){e===v&&m._deactivateComponent(t),r.set(t,g)}),A.groupEnd()}),b(this,"_unpauseAllComponents",function(){A.group("Unpause all components"),u.forEach(function(e,t){var r=new s.Z(t.getLoggerContext());t.setTimedPair(r,function(){u.set(t,v),m._activateComponent(t)})}),A.groupEnd()})}return e=[{key:"setHistoryStackContext",value:function(e){this.historyStackContext=e}},{key:"setPins",value:function(e){this.pins=e}},{key:"startOffsiteRightClickTimedPair",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._startOffsiteTimedPair(),e||r.flushContextEvents()}},{key:"registerComponent",value:function(e){null===this.appTimedPair?u.set(e,g):(u.set(e,v),this._activateComponent(e))}},{key:"unregisterComponent",value:function(e){u.get(e)===v&&(this._deactivateComponent(e),e.setTimedPair(new s.Z(e.getLoggerContext()))),u.delete(e)}},{key:"size",value:function(){return u.size}},{key:"onOffsiteEnd",value:function(e){p.push(e)}},{key:"removeOnOffsiteEnd",value:function(e){var t=p.indexOf(e);t>-1&&p.splice(t,1)}},{key:"_getIndexDBInstance",value:function(){return n}},{key:"_getContextLogger",value:function(){return r}},{key:"_clearTimeSpentManager",value:function(){this.appTimedPair=null,this.offsiteTimedPairForegroundId=null,m=null}},{key:"_clearIndexDB",value:function(){var e;null==(e=n)||e.clear(),n=null}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}())}}}]);